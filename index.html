<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MÄ°T | RAPOR & DUYURU PANELÄ°</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <style>
    body { background: #000; color: #00d4ff; font-family: 'Courier New', monospace; min-height: 100vh; margin: 0; display: flex; justify-content: center; align-items: center; padding: 20px; }
    .panel-kutu { background: rgba(15, 22, 32, 0.85); backdrop-filter: blur(15px); border: 2px solid #00d4ff; border-radius: 20px; padding: 40px; width: 90%; max-width: 800px; box-shadow: 0 0 60px rgba(0, 212, 255, 0.4); position: relative; }
    .status-bar { position: absolute; top: 15px; left: 30px; right: 30px; display: flex; justify-content: space-between; align-items: center; color: #e0e7ff; font-size: 1rem; padding: 10px 0; border-bottom: 1px solid rgba(0, 212, 255, 0.3); }
    h1 { color: #00d4ff; letter-spacing: 6px; margin: 60px 0 30px; font-size: 2.4rem; text-shadow: 0 0 20px #00d4ff; text-align: center; }
    h2 { color: #ff2d55; margin: 40px 0 20px; font-size: 1.8rem; text-align: center; }
    input, textarea, select, button { width: 100%; padding: 18px; margin: 15px 0; background: rgba(0, 0, 0, 0.6); border: 2px solid #00d4ff; color: #00d4ff; border-radius: 12px; font-size: 1.2rem; }
    textarea { height: 350px; resize: vertical; }
    button { background: rgba(0, 0, 0, 0.6); cursor: pointer; font-weight: bold; font-size: 1.4rem; border-color: #ff2d55; color: #ff2d55; }
    button:hover { background: #ff2d55; color: #000; box-shadow: 0 0 30px rgba(255, 45, 85, 0.6); }
    .sablon-btn { background: rgba(0, 212, 255, 0.2); border-color: #00d4ff; color: #00d4ff; font-size: 1.1rem; padding: 12px; margin: 8px 0; }
    .sablon-btn:hover { background: #00d4ff; color: #000; }
    .sablonlar { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin: 20px 0; }
    .container { display: none; }
    .active { display: block; }
    .success { color: #00ff9d; font-size: 1.6rem; font-weight: bold; margin: 30px 0; display: none; text-align: center; }
    nav button { width: auto; display: inline-block; margin: 15px; padding: 15px 35px; font-size: 1.3rem; }
    #wrong-pass { color: #ff2d55; font-size: 1.4rem; margin-top: 20px; text-align: center; }
    .discord-center-container { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 60vh; text-align: center; }
    .discord-btn { display: inline-block; width: 70%; max-width: 400px; padding: 25px; background: #5865F2; border: 2px solid #5865F2; color: #fff; font-size: 1.7rem; font-weight: bold; text-align: center; border-radius: 15px; text-decoration: none; box-shadow: 0 0 50px rgba(88, 101, 242, 0.6); transition: all 0.3s; }
    .discord-btn:hover { background: #4752C4; transform: scale(1.05); box-shadow: 0 0 70px rgba(88, 101, 242, 0.9); }
    .discord-btn i { margin-right: 15px; font-size: 1.8rem; }
    .profil-kart { background: rgba(0, 0, 0, 0.6); border: 2px solid #00d4ff; border-radius: 15px; padding: 25px; margin: 20px 0; text-align: center; box-shadow: 0 0 30px rgba(0, 212, 255, 0.3); }
    .profil-kart h3 { color: #ff2d55; font-size: 2.2rem; margin: 10px 0; }
    .profil-kart p { color: #94a3b8; font-size: 1.3rem; margin: 12px 0; }
    .rozetler { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 25px; }
    .rozet { background: linear-gradient(45deg, #ff2d55, #ff1744); color: #000; padding: 12px 20px; border-radius: 15px; font-weight: bold; font-size: 1.2rem; box-shadow: 0 0 20px rgba(255, 45, 85, 0.8); transition: transform 0.3s; }
    .rozet:hover { transform: scale(1.1); }
    .no-rozet { color: #64748b; font-style: italic; font-size: 1.2rem; }
    .admin-rozet-ver { background: rgba(255, 45, 85, 0.1); border: 2px dashed #ff2d55; border-radius: 15px; padding: 25px; margin: 30px 0; }
    .rozet-liste { margin-top: 20px; }
    .rozet-item { display: flex; justify-content: space-between; align-items: center; background: rgba(0, 0, 0, 0.5); padding: 15px; border-radius: 12px; margin: 10px 0; }
    .rozet-item span { color: #ff2d55; font-weight: bold; font-size: 1.3rem; }
    .sil-btn {
      background: #ff0000;
      border: none;
      color: #fff;
      padding: 6px 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: bold;
      box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
    }
    .sil-btn:hover { background: #cc0000; transform: scale(1.05); }
  </style>
</head>
<body>
  <div class="panel-kutu">
    <div class="status-bar">
      <div class="status-left"><i class="fas fa-wifi"></i> MÄ°T Secure Net</div>
      <div class="status-right"><span id="saat">00:00</span> | <span id="tarih"></span> <i class="fas fa-battery-full"></i></div>
    </div>
    <!-- GiriÅŸ -->
    <div id="giris" class="active">
      <h1>MÄ°T GÄ°RÄ°Åž</h1>
      <p style="font-size:1.3rem; margin:30px 0; color:#94a3b8;">Personel kodunuzu girin</p>
      <input type="password" id="access-password" placeholder="PERSONEL KODU" style="text-transform:uppercase; font-size:1.4rem;">
      <button onclick="girisYap()">GÄ°RÄ°Åž YAP</button>
      <p id="wrong-pass" style="display:none;">GeÃ§ersiz giriÅŸ!</p>
    </div>
    <!-- Ana Panel -->
    <div id="panel" class="container">
      <h1>MÄ°T PERSONEL PANELÄ°</h1>
      <!-- Profil KartÄ± -->
      <div class="profil-kart" id="profil-kart">
        <h3 id="profil-ad"></h3>
        <p>RÃ¼tbe: <span id="profil-rutbe"></span></p>
        <p>Rapor SayÄ±sÄ±: <span id="profil-rapor">0</span></p>
        <p>Tamamlanan Operasyon: <span id="profil-operasyon">0</span></p>
        <div class="rozetler" id="profil-rozetler">
          <p class="no-rozet">HenÃ¼z rozet kazanmadÄ±n. GÃ¶revleri tamamla!</p>
        </div>
      </div>
      <nav>
        <button onclick="goster('rapor')">RAPOR YAZ</button>
        <button onclick="goster('bilgilendirme')">BÄ°LGÄ°LENDÄ°RME</button>
        <button id="yeni-duyuru-btn" onclick="goster('duyuru-yaz')" style="display:none;">YENÄ° DUYURU</button>
      </nav>
      <!-- Rapor Yaz -->
      <div id="rapor" class="container active">
        <h2>RAPOR YAZ</h2>
        <input type="text" id="name" placeholder="Kod AdÄ±" required>
        <input type="text" id="code" placeholder="Personel Kodu" required>
        <select id="unit" required>
          <option value="">BÄ°RÄ°M SEÃ‡</option>
          <option>Ä°Ã§ Ä°stihbarat</option>
          <option>KarÅŸÄ± Ä°stihbarat</option>
          <option>Siber Ä°stihbarat</option>
          <option>Ä°stihbarat Saha Personeli</option>
        </select>
        <select id="status" required>
          <option value="">GÃ–REV DURUMU</option>
          <option>Aktif GÃ¶revde</option>
          <option>TamamlandÄ±</option>
          <option>Acil Durum</option>
          <option>Rutin Rapor</option>
        </select>
        <p style="color:#94a3b8; margin:30px 0; font-size:1.2rem;">HazÄ±r ÅŸablondan birini seÃ§in:</p>
        <div class="sablonlar">
          <button class="sablon-btn" onclick="sablonDoldur('kisi-takip')">KiÅŸi Takip</button>
          <button class="sablon-btn" onclick="sablonDoldur('operasyon')">Operasyon Tamamlanma</button>
          <button class="sablon-btn" onclick="sablonDoldur('acil')">Acil Durum</button>
          <button class="sablon-btn" onclick="sablonDoldur('saha-gozlem')">Saha GÃ¶zlem</button>
          <button class="sablon-btn" onclick="sablonDoldur('tahliye')">KiÅŸi Tahliye</button>
          <button class="sablon-btn" onclick="sablonDoldur('rutin')">Rutin Ä°stihbarat</button>
        </div>
        <textarea id="report" placeholder="Rapor detaylarÄ±nÄ± buraya yazÄ±n veya ÅŸablondan doldurun..." required></textarea>
        <input type="url" id="file-url" placeholder="Dosya BaÄŸlantÄ±sÄ± (FotoÄŸraf, belge vb. URL)">
        <button onclick="gonderRapor()">RAPORU GÃ–NDER</button>
        <p class="success" id="raporSuccess">Rapor baÅŸarÄ±yla gÃ¶nderildi, MÄ°T Mensubu!</p>
      </div>
      <!-- Bilgilendirme -->
      <div id="bilgilendirme" class="container">
        <div class="discord-center-container">
          <h2>PERSONEL BÄ°LGÄ°LENDÄ°RME</h2>
          <p style="color:#94a3b8; font-size:1.5rem; margin: 40px 0;">
            TÃ¼m duyurular ve personel bilgilendirmeler<br>
            Discord sunucusunda yapÄ±lmaktadÄ±r.
          </p>
          <a href="https://discord.gg/a6XbjtkR" target="_blank" class="discord-btn">
            <i class="fab fa-discord"></i> DISCORD'A GÄ°T
          </a>
        </div>
      </div>
      <!-- Duyuru Yaz + Rozet YÃ¶netimi -->
      <div id="duyuru-yaz" class="container">
        <h2>YENÄ° DUYURU</h2>
        <input type="text" id="duyuru-baslik" placeholder="Duyuru BaÅŸlÄ±ÄŸÄ±" required>
        <textarea id="duyuru-icerik" placeholder="TÃ¼m personelin dikkatine duyuru iÃ§eriÄŸi..." required></textarea>
        <button onclick="gonderDuyuru()">DUYURUYU GÃ–NDER</button>
        <p class="success" id="duyuruSuccess">Duyuru baÅŸarÄ±yla Discord'a gÃ¶nderildi!</p>
        <div class="admin-rozet-ver" id="admin-rozet-panel" style="display:none;">
          <h2>ROZET YÃ–NETÄ°MÄ° (ADMÄ°N)</h2>
          <!-- Rozet Ver -->
          <div>
            <h3>Yeni Rozet Ver</h3>
            <select id="rozet-ajan-ver"></select>
            <input type="text" id="rozet-isim-ver" placeholder="Rozet AdÄ± (Ã¶rn: 1453 MadalyasÄ±)">
            <button onclick="rozetVer()">ROZET VER</button>
            <p class="success" id="rozet-ver-basari" style="display:none;">Rozet baÅŸarÄ±yla verildi!</p>
          </div>
          <!-- Rozet Sil -->
          <div style="margin-top: 40px;">
            <h3>Mevcut Rozeti Sil</h3>
            <select id="rozet-ajan-sil" onchange="rozetListele()"></select>
            <div id="rozet-liste" class="rozet-liste"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    const PERSONNEL = {
      "MIT2026CCCC1965": "KORKUT",
      "MIT2026BBBB1453": "BEYAZIT",
      "MIT2026DDDD0033": "ANKA",
      "MIT2026EEEE0044": "NEO",
      "MIT2026CCCC0055": "SARI",
      "MIT2026DDDD0066": "YILKIRAN",
      "MIT2026AAAA0077": "ZÃœMRÃœD",
      "MIT2026HHHH0010": "Emniyet Genel MÃ¼dÃ¼rlÃ¼ÄŸÃ¼",
      "MIT2026IIII0011": "Adalet BakanlÄ±ÄŸÄ±"
    };
    const VALID_CODES = Object.keys(PERSONNEL);
    const RAPOR_WEBHOOK = "https://discord.com/api/webhooks/1457829355358261615/-uOZYjIN03dbE01uasvp0QK2bxujojEShfhrQX-bEAPFwpCebn9TdJYMgBipfMFf-3nX";
    const DUYURU_WEBHOOK = "https://discord.com/api/webhooks/1457829359250440326/NVcJMDNV4gZgYrtiB0JtxnfflbBJFJwIEV3RXNUbE37Glq94h8dV6wEoREySBJ4gsfI_";
    let isAdmin = false;
    let currentCode = "";
    // Rate Limiting for reports (1 per 5 minutes)
    let sonRaporZamani = 0;
    // Rate Limiting for announcements (1 per 5 minutes, for admins)
    let sonDuyuruZamani = 0;
    function rateLimitKontrolRapor() {
      const simdi = Date.now();
      if (simdi - sonRaporZamani < 300000) { // 5 minutes = 300000 ms
        alert("Spam Ã¶nleme: 5 dakikada en fazla 1 rapor gÃ¶nderebilirsin!");
        return false;
      }
      sonRaporZamani = simdi;
      return true;
    }
    function rateLimitKontrolDuyuru() {
      const simdi = Date.now();
      if (simdi - sonDuyuruZamani < 300000) { // 5 minutes = 300000 ms
        alert("Spam Ã¶nleme: 5 dakikada en fazla 1 duyuru gÃ¶nderebilirsin!");
        return false;
      }
      sonDuyuruZamani = simdi;
      return true;
    }
    function updateStatusBar() {
      const now = new Date();
      const saat = now.toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' });
      const tarih = now.toLocaleDateString('tr-TR', { day: '2-digit', month: 'long', year: 'numeric' });
      document.getElementById('saat').textContent = saat;
      document.getElementById('tarih').textContent = tarih;
    }
    updateStatusBar();
    setInterval(updateStatusBar, 1000);
    function girisYap() {
      const giris = document.getElementById('access-password').value.trim().toUpperCase();
      if (VALID_CODES.includes(giris)) {
        document.getElementById('wrong-pass').style.display = "none";
        currentCode = giris;
        isAdmin = (giris === "MIT2026CCCC1965");
        document.getElementById('yeni-duyuru-btn').style.display = isAdmin ? "inline-block" : "none";
        document.getElementById('admin-rozet-panel').style.display = isAdmin ? "block" : "none";
        document.getElementById('name').value = PERSONNEL[giris];
        document.getElementById('code').value = giris;
        document.getElementById('giris').style.display = "none";
        document.getElementById('panel').style.display = "block";
        document.getElementById('profil-kart').style.display = "block";
        profilGuncelle();
        if (isAdmin) adminRozetArayuzHazirla();
        goster('rapor');
      } else {
        document.getElementById('wrong-pass').style.display = "block";
      }
    }
    function goster(id) {
      document.querySelectorAll('#panel > div.container').forEach(el => el.style.display = "none");
      document.getElementById(id).style.display = "block";
    }
    function sablonDoldur(tip) {
      let raporMetni = "";
      let durum = "TamamlandÄ±";
      if (tip === 'kisi-takip') {
        raporMetni = `Takip Edilen KiÅŸi: [DOLDURUN - Ad Soyad / TanÄ±mlama]
Takip AmacÄ±: [DOLDURUN - Sebep / GÃ¶rev]
Takip BaÅŸlangÄ±Ã§ Tarihi/Saati: [DOLDURUN - GG.AA.YYYY SS:DD]
GÃ¶zlemler:
- Saat [DOLDURUN]: [yer/adres] tespit edildi.
- [DOLDURUN - saat]: [gÃ¶rÃ¼ÅŸme / hareket] gÃ¶zlemlendi.
- [DOLDURUN - ek gÃ¶zlemler]
SonuÃ§:
- Takip devam ediyor.
- ÅžÃ¼pheli temas: [EVET/HAYIR - detay]
- Rapor merkez Ã¼ssÃ¼ne iletildi.`;
        durum = "Aktif GÃ¶revde";
      } else if (tip === 'operasyon') {
        raporMetni = `Operasyon AdÄ±: [DOLDURUN - Kod adÄ±]
Operasyon Tarihi/Saati: [DOLDURUN - GG.AA.YYYY SS:DD]
Operasyon Yeri: [DOLDURUN - Adres / BÃ¶lge]
Detaylar:
- Ekip sayÄ±sÄ±: [DOLDURUN]
- Hedef: [DOLDURUN - AÃ§Ä±klama]
- YÃ¼rÃ¼tme: [DOLDURUN - AdÄ±m adÄ±m]
SonuÃ§:
- Operasyon baÅŸarÄ±yla tamamlandÄ±.
- Ele geÃ§irilen: [DOLDURUN - Materyal / Bilgi]
- KayÄ±plar: Yok`;
        durum = "TamamlandÄ±";
      } else if (tip === 'acil') {
        raporMetni = `Acil Durum Yeri: [DOLDURUN - Adres / Koordinat]
Olay Tarihi/Saati: [DOLDURUN - GG.AA.YYYY SS:DD]
Olay TanÄ±mÄ±:
- [DOLDURUN - Ne oldu?]
AlÄ±nan Tedbirler:
- [DOLDURUN - YapÄ±lan mÃ¼dahale]
- Takviye talep edildi: [EVET/HAYIR]
SonuÃ§:
- Durum kontrol altÄ±nda / devam ediyor
- Acil rapor merkez Ã¼ssÃ¼ne iletildi.`;
        durum = "Acil Durum";
      } else if (tip === 'saha-gozlem') {
        raporMetni = `GÃ¶zlem Yeri: [DOLDURUN - Adres / BÃ¶lge]
GÃ¶zlem Tarihi/Saati: [DOLDURUN - GG.AA.YYYY SS:DD]
GÃ¶zlemler:
- BÃ¶lgede hareketlilik: [NORMAL / ÅžÃœPHELÄ° - detay]
- Tespit edilen araÃ§: [DOLDURUN - Plaka / TanÄ±mlama]
- KiÅŸi sayÄ±sÄ±: [DOLDURUN]
SonuÃ§:
- Rutin gÃ¶zlem.
- Takip Ã¶nerisi: [VAR / YOK]`;
        durum = "Rutin Rapor";
      } else if (tip === 'tahliye') {
        raporMetni = `Tahliye Edilen KiÅŸi: [DOLDURUN - Ad Soyad / Kod]
Tahliye Tarihi/Saati: [DOLDURUN - GG.AA.YYYY SS:DD]
Tahliye Yeri: [DOLDURUN - AlÄ±m noktasÄ±]
Detaylar:
- Tahliye rotasÄ±: [DOLDURUN - GÃ¼venli rota]
- Kontrol noktalarÄ±: Sorunsuz geÃ§ildi
- Teslim yeri: [DOLDURUN]
SonuÃ§:
- Tahliye baÅŸarÄ±yla tamamlandÄ±.
- KiÅŸi gÃ¼vende.`;
        durum = "TamamlandÄ±";
      } else if (tip === 'rutin') {
        raporMetni = `Rutin Kontrol Yeri: [DOLDURUN - BÃ¶lge / Adres]
Kontrol Tarihi: [DOLDURUN - GG.AA.YYYY]
GÃ¶zlemler:
- Her ÅŸey normal.
- Yeni geliÅŸme: [YOK / VAR - detay]
- Ä°letiÅŸim: Temiz
SonuÃ§:
- Rutin rapor.
- GÃ¶zlem devam ediyor.`;
        durum = "Rutin Rapor";
      }
      document.getElementById('report').value = raporMetni;
      document.getElementById('status').value = durum;
    }
    async function gonderRapor() {
      if (!rateLimitKontrolRapor()) return;
      const data = {
        name: document.getElementById('name').value.trim(),
        code: document.getElementById('code').value.trim(),
        unit: document.getElementById('unit').value,
        status: document.getElementById('status').value,
        report: document.getElementById('report').value.trim(),
        fileUrl: document.getElementById('file-url').value.trim(),
        time: new Date().toLocaleString('tr-TR')
      };
      const embed = {
        title: data.status === 'Acil Durum' ? "âš ï¸ ACÄ°L RAPOR" : "YENÄ° RAPOR",
        color: data.status === 'Acil Durum' ? 0xff0000 : 0x00d4ff,
        fields: [
          { name: "Mensup", value: `\`${data.name}\``, inline: true },
          { name: "Kod", value: `\`${data.code}\``, inline: true },
          { name: "Birim", value: data.unit, inline: true },
          { name: "Durum", value: data.status, inline: true },
          { name: "Zaman", value: data.time },
          { name: "Rapor", value: `\`${data.report.substring(0,1000)}${data.report.length > 1000 ? '...' : ''}\`` },
          ...(data.fileUrl ? [{ name: "Dosya", value: data.fileUrl }] : [])
        ]
      };
      try {
        await fetch(RAPOR_WEBHOOK, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            content: "<@&1452782503759843482>",
            embeds: [embed]
          })
        });
        document.getElementById('raporSuccess').style.display = "block";
        setTimeout(() => document.getElementById('raporSuccess').style.display = "none", 6000);
        profilGuncelle();
      } catch (err) {
        alert("Rapor gÃ¶nderilemedi.");
      }
    }
    async function gonderDuyuru() {
      if (!rateLimitKontrolDuyuru()) return;
      const baslik = document.getElementById('duyuru-baslik').value.trim();
      const icerik = document.getElementById('duyuru-icerik').value.trim();
      if (!baslik || !icerik) {
        alert("BaÅŸlÄ±k ve iÃ§erik doldurulmalÄ±!");
        return;
      }
      const embed = {
        title: `ðŸ“¢ ${baslik.toUpperCase()} ðŸ“¢`,
        description: icerik,
        color: 0xff1744,
        footer: { text: "PERSONEL BÄ°LGÄ°LENDÄ°RME | Ajan KORKUT" },
        timestamp: new Date().toISOString()
      };
      try {
        await fetch(DUYURU_WEBHOOK, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            content: "<@&997276536250056855>",
            embeds: [embed]
          })
        });
        document.getElementById('duyuruSuccess').style.display = "block";
        setTimeout(() => document.getElementById('duyuruSuccess').style.display = "none", 6000);
        document.getElementById('duyuru-baslik').value = '';
        document.getElementById('duyuru-icerik').value = '';
        goster('bilgilendirme');
      } catch (err) {
        alert("Duyuru gÃ¶nderilemedi.");
      }
    }
    // Profil GÃ¼ncelleme
    function profilGuncelle() {
      const ad = PERSONNEL[currentCode];
      document.getElementById('profil-ad').textContent = ad;
      let rutbe = "Saha Mensubu";
      if (isAdmin) {
        rutbe = "Komuta Merkezi";
      } else if (currentCode === "MIT2026HHHH0010") {
        rutbe = "Emniyet Ä°letiÅŸim HattÄ±";
      } else if (currentCode === "MIT2026IIII0011") {
        rutbe = "Adli Ä°letiÅŸim HattÄ±";
      }
      document.getElementById('profil-rutbe').textContent = rutbe;
      let stats = JSON.parse(localStorage.getItem('mitStats') || '{}');
      let ajanStats = stats[currentCode] || { rapor: 0, operasyon: 0 };
      ajanStats.rapor++;
      ajanStats.operasyon = Math.floor(ajanStats.rapor / 3);
      stats[currentCode] = ajanStats;
      localStorage.setItem('mitStats', JSON.stringify(stats));
      document.getElementById('profil-rapor').textContent = ajanStats.rapor;
      document.getElementById('profil-operasyon').textContent = ajanStats.operasyon;
      let rozetler = JSON.parse(localStorage.getItem('mitRozet') || '{}');
      let ajanRozet = rozetler[currentCode] || [];
      const container = document.getElementById('profil-rozetler');
      container.innerHTML = '';
      if (ajanRozet.length === 0) {
        const p = document.createElement('p');
        p.className = 'no-rozet';
        p.textContent = 'HenÃ¼z rozet kazanmadÄ±n. GÃ¶revleri tamamla!';
        container.appendChild(p);
      } else {
        ajanRozet.forEach(r => {
          const div = document.createElement('div');
          div.className = 'rozet';
          div.textContent = r;
          container.appendChild(div);
        });
      }
    }
    // Admin Rozet ArayÃ¼zÃ¼ HazÄ±rla
    function adminRozetArayuzHazirla() {
      const selectVer = document.getElementById('rozet-ajan-ver');
      const selectSil = document.getElementById('rozet-ajan-sil');
      selectVer.innerHTML = '<option value="">Ajan SeÃ§</option>';
      selectSil.innerHTML = '<option value="">Ajan SeÃ§</option>';
      Object.keys(PERSONNEL).forEach(kod => {
        const optVer = document.createElement('option');
        optVer.value = kod;
        optVer.textContent = PERSONNEL[kod];
        selectVer.appendChild(optVer);
        const optSil = document.createElement('option');
        optSil.value = kod;
        optSil.textContent = PERSONNEL[kod];
        selectSil.appendChild(optSil);
      });
    }
    // Rozet Ver
    function rozetVer() {
      const ajanKod = document.getElementById('rozet-ajan-ver').value;
      const rozetAd = document.getElementById('rozet-isim-ver').value.trim();
      if (!ajanKod || !rozetAd) {
        alert("Ajan ve rozet adÄ± seÃ§!");
        return;
      }
      let rozetler = JSON.parse(localStorage.getItem('mitRozet') || '{}');
      if (!rozetler[ajanKod]) rozetler[ajanKod] = [];
      rozetler[ajanKod].push(rozetAd);
      localStorage.setItem('mitRozet', JSON.stringify(rozetler));
      document.getElementById('rozet-ver-basari').style.display = "block";
      setTimeout(() => document.getElementById('rozet-ver-basari').style.display = "none", 5000);
      document.getElementById('rozet-isim-ver').value = '';
      if (ajanKod === currentCode) profilGuncelle();
    }
    // Rozet Listele (Silme iÃ§in)
    function rozetListele() {
      const ajanKod = document.getElementById('rozet-ajan-sil').value;
      const listeDiv = document.getElementById('rozet-liste');
      listeDiv.innerHTML = '';
      if (!ajanKod) return;
      let rozetler = JSON.parse(localStorage.getItem('mitRozet') || '{}');
      let ajanRozet = rozetler[ajanKod] || [];
      if (ajanRozet.length === 0) {
        listeDiv.innerHTML = '<p style="color:#94a3b8;">Bu ajanÄ±n rozeti yok.</p>';
        return;
      }
      ajanRozet.forEach((rozet, index) => {
        const item = document.createElement('div');
        item.className = 'rozet-item';
        item.innerHTML = `
          <span>${rozet}</span>
          <button class="sil-btn" onclick="rozetSil('${ajanKod}', ${index})">SÄ°L</button>
        `;
        listeDiv.appendChild(item);
      });
    }
    // Rozet Sil
    function rozetSil(ajanKod, index) {
      let rozetler = JSON.parse(localStorage.getItem('mitRozet') || '{}');
      if (rozetler[ajanKod] && rozetler[ajanKod][index] !== undefined) {
        rozetler[ajanKod].splice(index, 1);
        if (rozetler[ajanKod].length === 0) delete rozetler[ajanKod];
        localStorage.setItem('mitRozet', JSON.stringify(rozetler));
        rozetListele();
        if (ajanKod === currentCode) profilGuncelle();
        alert("Rozet baÅŸarÄ±yla silindi!");
      }
    }
  </script>
</body>
</html>
